# 字幕生成工具 PRD 需求文档

## 1. 产品概述

### 1.1 产品定位
一个基于Web的字幕生成工具，用户可以在图片或视频背景上添加自定义字幕，支持多种字体样式和视觉效果设置。

### 1.2 目标用户
- 视频创作者
- 社交媒体内容制作者
- 教育工作者
- 营销人员

## 2. 功能需求

### 2.1 核心功能模块

#### 2.1.1 字幕设置面板
**字幕高度设置**
- 功能描述：调节字幕背景条的高度
- 输入方式：数字输入框 + px单位
- 默认值：60px
- 取值范围：20-200px
- 实时预览：修改后立即在预览区域显示效果

**字体大小设置**
- 功能描述：调节字幕文字的大小
- 输入方式：数字输入框 + px单位
- 默认值：40px
- 取值范围：12-100px
- 实时预览：修改后立即在预览区域显示效果

**字体颜色设置**
- 功能描述：设置字幕文字的颜色
- 输入方式：颜色选择器 + 十六进制色值输入框
- 默认值：#030303（深灰色）
- 支持格式：十六进制色值、RGB、HSL
- 实时预览：颜色改变后立即显示效果

**轮廓颜色设置**
- 功能描述：设置字幕文字的描边颜色
- 输入方式：颜色选择器 + 十六进制色值输入框
- 默认值：#000000（黑色）
- 支持格式：十六进制色值、RGB、HSL
- 实时预览：颜色改变后立即显示效果

**字体样式设置**
- 功能描述：选择字幕使用的字体
- 输入方式：下拉选择框
- 默认选项：衣冠体
- 支持字体：
  - 衣冠体
  - 微软雅黑
  - 宋体
  - 黑体
  - Arial
  - Times New Roman
  - 思源黑体
- 实时预览：字体改变后立即显示效果

**字体粗细设置**
- 功能描述：调节字体的粗细程度
- 输入方式：下拉选择框
- 默认选项：正常
- 支持选项：
  - 细体
  - 正常
  - 粗体
  - 超粗体
- 实时预览：粗细改变后立即显示效果

#### 2.1.2 字幕内容编辑
**文本输入区域**
- 功能描述：输入要显示的字幕内容
- 输入方式：多行文本输入框
- 支持功能：
  - 多行文本输入
  - 自动换行
  - 字符计数显示
  - 支持中英文混合输入
- 最大字符限制：1000字符
- 实时预览：输入内容立即在预览区域显示

#### 2.1.3 预览区域
**背景图片显示**
- 功能描述：显示用户上传的背景图片
- 支持格式：JPG、PNG、GIF、WebP
- 最大文件大小：10MB
- 显示方式：等比例缩放，保持原始比例

**字幕叠加效果**
- 功能描述：在背景图片上叠加字幕效果
- 特殊要求：
  - 每行字幕都有统一的半透明背景条
  - 背景条高度与"字幕高度"设置保持一致
  - 背景条是背景图片的底部切一条，呈现切割感，覆盖整个图片宽度
  - 字幕文字居中显示在背景条上
- 位置设置：字幕默认显示在图片底部
- 透明度：背景条透明度为70%

#### 2.1.4 操作功能
**生成字幕图片**
- 功能描述：根据当前设置生成最终的字幕图片
- 按钮样式：蓝色主按钮
- 生成格式：PNG（支持透明度）
- 分辨率：保持原始图片分辨率
- 处理时间：3-5秒

**保存图片**
- 功能描述：将生成的字幕图片保存到本地
- 按钮样式：灰色次要按钮
- 保存格式：PNG、JPG可选
- 文件命名：自动生成时间戳命名
- 下载方式：浏览器直接下载

### 2.2 辅助功能

#### 2.2.1 背景图片上传
- 支持拖拽上传
- 支持点击选择文件
- 图片格式验证
- 文件大小限制提示
- 上传进度显示

#### 2.2.2 预设模板
- 提供常用字幕样式预设
- 一键应用预设配置
- 用户可保存自定义预设

#### 2.2.3 历史记录
- 保存最近使用的配置
- 快速恢复之前的设置

## 3. 技术需求

### 3.1 前端技术栈
- HTML5 Canvas API（用于图片处理和字幕渲染）
- CSS3（界面样式和动画效果）
- JavaScript ES6+（核心逻辑处理）
- 推荐框架：React.js 或 Vue.js

### 3.2 核心技术实现
**图片处理**
- 使用Canvas API进行图片合成
- 支持图片缩放和裁剪
- 文字渲染和描边效果

**字幕背景条效果**
- 计算文字行数和位置
- 背景图片的底部切一条字幕的高度作为背景
- 绘制半透明背景矩形
- 确保背景条覆盖整个图片宽度

**实时预览**
- 监听所有设置项的变化
- 防抖处理避免频繁渲染
- 异步渲染保证界面流畅

### 3.3 性能要求
- 页面加载时间 < 3秒
- 字幕生成时间 < 5秒
- 支持最大2000x2000像素图片处理
- 内存使用优化，避免内存泄漏

## 4. 用户界面设计

### 4.1 布局结构
- 左侧：设置面板（固定宽度400px）
- 右侧：预览区域（自适应宽度）
- 响应式设计，支持移动端访问

### 4.2 视觉设计
- 简洁现代的界面风格
- 主色调：蓝色系
- 辅助色：浅紫色系
- 高对比度，确保可访问性

### 4.3 交互设计
- 所有设置项支持实时预览
- 友好的错误提示和加载状态
- 键盘快捷键支持
- 拖拽操作的视觉反馈

## 5. 用户体验要求

### 5.1 易用性
- 新用户5分钟内能完成第一个字幕制作
- 提供操作指引和帮助文档
- 错误操作可撤销

### 5.2 兼容性
- 支持主流浏览器（Chrome、Firefox、Safari、Edge）
- 移动端浏览器适配
- 不同屏幕分辨率适配

### 5.3 性能体验
- 流畅的操作响应
- 合理的加载提示
- 优雅的错误处理

## 6. 验收标准

### 6.1 功能验收
- [ ] 所有设置项功能正常
- [ ] 字幕生成效果符合预期
- [ ] 图片保存功能正常
- [ ] 实时预览功能稳定

### 6.2 性能验收
- [ ] 页面加载时间达标
- [ ] 字幕生成速度达标
- [ ] 内存使用合理
- [ ] 无明显卡顿现象

### 6.3 兼容性验收
- [ ] 主流浏览器测试通过
- [ ] 移动端功能正常
- [ ] 不同分辨率显示正常

## 7. 后续迭代规划

### 7.1 V1.1 版本
- 添加更多字体选择
- 支持字幕位置调节
- 增加动画效果

### 7.2 V1.2 版本
- 支持视频字幕生成
- 批量处理功能
- 云端保存和分享

### 7.3 V2.0 版本
- AI智能字幕生成
- 多语言支持
- 协作编辑功能